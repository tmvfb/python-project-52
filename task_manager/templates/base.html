<!doctype html>

{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}
{% load static %}
{% load bootstrap4 %}
{% bootstrap_css %}
{% bootstrap_javascript %}

<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>{% translate 'Task manager' %}</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/starter-template/">

    <!-- Bootstrap core CSS -->
    <link href="{% static 'bootstrap.min.css' %}" rel="stylesheet">

    <!-- Custom styles for this template -->
    <style>
    body {
      padding-top: 5rem;
    }
    .starter-template {
      padding: 3rem 1.5rem;
      text-align: center;
    }
    .invert-image {
      filter: invert(100%);
    }
    </style>
  </head>

  <body>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="{% url 'home' %}">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/68/Font_Awesome_5_solid_tasks.svg" alt="Tasks icon" width="22" height="22" class="invert-image mb-1">
        {% translate 'Task manager' %}
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'users' %}">{% translate 'Users' %}</a>
          </li>
      {% if request.user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'statuses' %}">{% translate 'Statuses' %}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'labels' %}">{% translate 'Labels' %}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'tasks' %}">{% translate 'Tasks' %}</a>
          </li>
      {% endif %}
        </ul>
      {% if request.user.is_authenticated %}
        <form class="form-inline my-2 my-lg-0">
          <input class="form-control mr-sm-2" type="text" placeholder="{% translate 'Search' %}" aria-label="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">{% translate 'Search' %}</button>
        </form>
      {% endif %}

        <ul class="navbar-nav mr-0 ml-4">

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{% translate 'Language' %}</a>
            <div class="dropdown-menu" aria-labelledby="dropdown01">
              <form action="{% url 'set_language' %}" method="post" class="form-inline">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ redirect_to }}">

                {% for language in languages %}
                  <button name="language" value="{{ language.code }}" type="submit" class="mx-auto dropdown-item">{{ language.name_local }} ({{ language.code }})</button>
                {% endfor %}

              </form>
            </div>
          </li>

      {% if not request.user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'user_login' %}">{% translate 'Login' %}</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'user_create' %}">{% translate 'Sign up' %}</a>
            </li>
      {% endif %}
      {% if request.user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'user_logout' %}">{% translate 'Logout' %}</a>
            </li>
      {% endif %}
        </ul>
      </div>
    </nav>

    <main role="main" class="container">

      {% if messages %}
      <ul class="messages row justify-content-center col-12">
        {% for message in messages %}
          {% if 'warning' in message.tags %}
            <div class="alert alert-danger alert-dismissible fade show col-12" role="alert">
              {{ message }}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          {% elif 'success' in message.tags %}
            <div class="alert alert-success alert-dismissible fade show col-12" role="alert">
              {{ message }}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          {% endif %}
        {% endfor %}
      </ul>
      {% endif %}

      {% block main %}

        <div class="starter-template">
          <h1>{% translate 'Task manager' %}</h1>
          <p class="lead">
            {% translate 'A web app to manage your tasks. Supports adding and editing labels and statuses for the task.' %}
            <br>
            {% translate 'Please register to get started.' %}
          </p>
        </div>

      {% endblock %}
    </main>

  </body>
</html>
